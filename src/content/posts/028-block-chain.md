---
template: blog-post
title: ブロックチェーンとはどんな技術なのか？
slug: /whats-block-chain
date: 2022-05-07 08:00
description: ブロックチェーン技術の基礎
featuredImage: /assets/028-block-chain/block-chain-header.png
---

近年、IT 系のニュース記事で盛んに目にするようになってきた「ブロックチェーン」。
ビットコインなどの仮想通貨で有名になり、公共、医療、IoT など多岐にわたるジャンルに応用が可能といわれているが、
実際のところはどうなのか。

ここでは、ブロックチェーンの特性を可能な限りわかりやすく説明してみたい。
読み終わった後に「自分たちでもこんなふうに応用できるかもしれない」と
イメージを持ってもらうことをゴールに進めていければと思う。

<br />

## ブロックチェーンの基礎知識

まずはブロックチェーンとは何かということから説明していく。

### ブロックチェーンってそもそもなんなの？

ブロックチェーンとは、ネットワークに接続された1つ1つの **ノード**（コンピュータ）が取引情報を共有し、
相互に監視することで、透明性を確保しながらデータの改ざんを防ぐことができる **分散型台帳技術** の一種である。

`ブロックチェーンにおけるノードの概念`<br />
![ブロックチェーンにおけるノードの概念](./assets/028-block-chain/node.png)

<br />

ブロックチェーンでは、ネットワーク内で発生した一定の時間、一定の量の取引データ（トランザクション）を
 **ブロック** と呼ばれる箱に格納してまとめる。
そして生成したブロックを、その時点で存在する最も新しいブロックの後ろにつなげて蓄積していく。
その結果、ブロック同士が時系列順にチェーン（鎖）のように連結していくことになる。
このようなデータ構造からブロックチェーンと呼ばれている。

`ブロック同士が時系列順に鎖のように連結していく`<br />
![ブロック同士が時系列順に鎖のように連結していく](./assets/028-block-chain/blocks.png)

<br />

### 仮想通貨とブロックチェーンの関係

ブロックチェーンはもともと仮想通貨であるビットコインの基幹技術として考え出されたものである。
基本的な仕組みは **サトシ・ナカモト**(Satoshi Nakamoto) と名乗る人物が投稿した論文に記載され、
その内容に基づいて2009年にビットコインが実装され、運用が開始された。

ビットコインの場合で表現するなら、ビットコインを送付する際の所有権移転の履歴がトランザクション、
そのトランザクションを記録・保管・共有する「公開分散元帳」がブロックチェーンである。

<br />

#### ジェネシスブロック

ジェネシスブロック（Genesis Block）とは、ブロックチェーンにおける最初のブロック（ブロック0）のことである。

ブロックとは、取引データやハッシュ値、タイムスタンプといったデータの塊のこと。
ブロックチェーンはこの「ブロック」が繋がって構成されている。
ブロックチェーンには直前のブロックのハッシュ値が含まれており、
取引内容の検証であるマイニングを行うことによってつなぎ合わされていくが、
ジェネシスブロックの前にはブロックがないためハッシュ値がない。

ビットコイン（Bitcoin/BTC）のジェネシスブロックにはハッシュ値ではなく
 **`The Times 03/Jan/2009 Chancellor on brink of second bailout for bank`** という
 文字列が書き込まれている。
 これは英タイムズ誌の2009年1月3日号の見出しの引用で **`銀行救済に二度目の公的資金注入へ`** という意味である。

この見出しからは2つの内容が読み取ることができる。

<br />

##### ①歴史の証明

1つ目はビットコインのブロックチェーンが2009年1月3日（日本時間では1月4日）から始まったということである。
新聞の見出しは発行された日付以前に知ることはできない。
よって、ジェネシスブロックはサトシ・ナカモトによって2009年1月3日以降に作成されたことの証明になってる。

<br />

##### ②ビットコインの設計思想

2つ目は、**見出しにビットコインの設計思想が組み込まれている** ことである。

当時はリーマンショックによって、経済が大きく混乱していた。
当時の見出しは、銀行が金融システムを中央集権的にコントロールしており、
金融混乱は政府が中央集権的に自由市場へ介入していることによって起きた
ということを批判していると読み取ることができる。

ビットコインは非中央集権的な分散管理によって運営されている。
ビットコインを開発したとされるサトシ・ナカモトも実際に存在するのか、
個人なのかグループなのかも不明なままで、管理者はいない。
つまり、サトシ・ナカモトという名前は非中央集権的な思想を表すアイコンだともいえる。

当時はタイムズ誌以外にも選ぶ見出しはあったはずだが、
わざわざ銀行や政府批判と捉えられる見出しを選んだことで、
非中央集権的な経済システムを構築するというビットコインの設計思想を伝える意図があったと考えられる。

<br />

2022年5月時点のビットコインブロックは約73万を突破している。いかに多くの取引活動が行われたかが分かる。

ジェネシスブロックはもちろんビットコイン以外のブロックチェーンにも存在する。
イーサリアムのジェネシスブロックは2015年7月30日にマイニングされ、2022年5月時点で1470万ブロックを超えている。

※ビットコイン、イーサリアムそれぞれのマイニングされたブロック数は、
暗号通貨金融サービス会社 Blockchain.com のエクスプローラーで確認した数である

Blockchain Explorer - Search the Blockchain | BTC  
https://www.blockchain.com/explorer?view=btc

Blockchain Explorer - Search the Blockchain | ETH  
https://www.blockchain.com/explorer?view=eth

<br />

## ブロックチェーンの仕組み

ブロックチェーンはなぜ改ざんが難しいのか、
また仮想通貨の基幹技術として成り立っているのか、その仕組みについても見ていく。

まず、ブロックチェーンの各ブロックには、取引データのほかに **ハッシュ値** と **ナンス値** が含まれている。

**ハッシュ値** は、ハッシュ関数というアルゴリズムによって元のデータから求められる、
**一方向にしか変換できない不規則な文字列** のことである。

ブロックチェーンにおいてはハッシュ関数と呼ばれる関数が様々な場面で使用される。
ハッシュ関数とは、以下の特徴的な性質を持つ関数である。

- 任意の長さのデータから固定長の出力データを返す
- あるデータを一方向にしか変換できず、ハッシュ化されたデータを元のデータに戻すことは基本的に不可能

ハッシュ関数により返されたハッシュ値は、入力されたデータに固有な値であり、
どんなデータを入力しても必ず一定の桁数の値となる。
そのハッシュ値から元のデータを特定することはできない。
また、入力データが同じならば、誰がいつどこでハッシュ関数にかけても、同じハッシュ値が得られる。

ここで、暗号化技術に疎い方のために少し掘り下げて具体例を示そう。ビットコインでは **SHA256** という
ハッシュアルゴリズムが使われており、
以下の表の左の単語を SHA256 のアルゴリズムにかけると、右のハッシュ値が出力される。

SHA256 は `Secure Hash Algorithm 256 bit` の略であり、
その名前が示す通り 16 進数で表した 256 ビット（32バイト）長のハッシュ値を得ることができる。

<table>
	<tr>
		<th class="th">入力データ </th>
		<th class="th">ハッシュ値（SHA256 アルゴリズム） </th>
	</tr>
	<tr>
		<th class="data">ブロックチェーン</th>
		<td class="data">43aa77223de044b2eb7823a4f1608b24f292c69889de8f039b9964466bd2bd44</td>
	</tr>
	<tr class="even">
		<th class="data">フロックチェーン</th>
		<td class="data">b2e026848f425a438e8e80609335edc2747388f3f9b415466d73cf1955fb0cc5</td>
	</tr>
  <tr>
		<th class="data">ぶろっくちぇーん</th>
		<td class="data">16b614cbb77897d4f410e0e86f965f90c028d1996296c342dad8a84a93661e45</td>
	</tr>
  <tr class="even">
		<th class="data">BlockChain</th>
		<td class="data">3a6fed5fc11392b3ee9f81caf017b48640d7458766a8eb0382899a605b41f2b9</td>
	</tr>
  <tr>
		<th class="data">あ</th>
		<td class="data">dc5a4d3d82f7e15792959dc661538ae0e541ce66494516f5c9cfd9cd3308494d</td>
	</tr>
  <tr class="even">
		<th class="data">a</th>
		<td class="data">ca978112ca1bbdcafac231b39a23dc4da786eff8147c4e72b9807785afee48bb</td>
	</tr>
  <tr>
		<th class="data">A</th>
		<td class="data">559aead08264d5795d3909718cdd05abd49572e84fe55590eef31a88a08fdffd</td>
	</tr>
  <tr class="even">
		<th class="data">長い文字列でも短い文字列でも一定の長さの値を返す</th>
		<td class="data">900b5fa6b0ba687e7503286b273d55eb5f7f1d5b5b5f6b385df4703e4f4f2fd4</td>
	</tr>
</table>

<style>
th.th {
  padding-top: 18px;
  padding-bottom: 18px;
  color: #fff;
  font-size: 14px;
  line-height: 1.4;
  background-color: #6c7ae0;
}

th.data {
  padding: 18px 4px;
  font-size: 14px;
  line-height: 1.4;
}

td.data {
  padding: 18px 4px;
  font-size: 16px;
  color: #808080;
  line-height: 1.4;
}

tr.even {
      background-color: #f8f6ff;
}
</style>

<br />

この表からわかるように、入力するデータの長さや文字の種類、内容を問わず、
返ってくるハッシュ値の桁数は一定で、たった1文字違うだけでも全く別のハッシュ値が返される。
したがって、**元のデータに少しでも手が加えられていたら全く異なるハッシュ値となる** ため、
正しいハッシュ値と比較することで容易に改ざんを検出することができる。
また、どんなに長大なデータを入力しても一定の桁数で返すハッシュ関数は、効率的な通信を実現する。

ブロックチェーンは、ハッシュのこのような特性を生かし、改ざん耐性が高く効率的なデータの管理を実現している。

もしも誰かが過去のある時点に生成したブロック内の取引データを改ざんすると、
そのブロックから求められるハッシュ値は正規のものとは異なる。
それをごまかすには後続する全ブロックのハッシュ値を変更しならない。
そのような作業は事実上不可能に近いので、ブロックチェーンは改ざん耐性に優れた構造を持つとされている。

`ハッシュによる改ざんや破損の検出イメージ`<br />
![ハッシュによる改ざんや破損の検出イメージ](./assets/028-block-chain/malice-manipulation.png)

<br />

### 分散型台帳とチェーンの淘汰

ブロックチェーンは分散型の台帳である。
台帳は複数のサーバーにミラーリングされ（コピーが保存される）、常に比較されている。
ところが、改ざんされた台帳は、チェーンが途切れて短くなるためコピーされない。
なぜなら、ブロックチェーンの仕組み上、「最も長いチェーンが正しい正本」となるため、これによって上書きされる。

結果、どの台帳も内容が正しく最新の状態に保たれる。

<br />

## 取引情報が記録されるまでの流れ

では、どのようにみんなで同じトランザクション（取引情報）を管理するのか。
まずは次の図を見てもらいたい。

`ブロックチェーンのデータ構造`<br />
![ブロックチェーンのデータ構造](./assets/028-block-chain/blockchains-structure.png)

<br />

ブロックチェーンは、その名の通り、ブロックを連結させるようなイメージで取引履歴を管理する。

各ブロックにトランザクション（取引内容）を入れて、それを一つの塊としてブロックを作ると、
このブロックのハッシュを生成し、また次のブロックを作成したときに前のハッシュの情報を作成したブロックに入れる。

ブロックチェーンでは、取引が発生するとその情報が生成・検証され記録されていくことになる。
そのプロセスをビットコインを事例にして追って見ていきたい。

A さんが B さんにお金を送る場合、新しいトランザクション（取引内容）が生成されて、新しいブロックが作成される。
作成されたブロックをブロックチェーンにつなげることで取引が安全に承認されたことになる。

ただし、勝手にブロックをつなげられるかといえばそうではなく、
個人が提供しているサーバーの集合体がみんなで承認する（コンセンサスを得る）ことで初めて、
作成されたブロックがチェーンに結びつくようになる。
つまり、みんなで取引を監視している状態となっている。

<br />

###  トランザクション：取引情報の生成

まずは、「トランザクション」と呼ばれる、取引情報を生成する作業が行われる。

細かい実装でいうと、ビットコインの場合には、トランザクションの要約結果を格納する
木構造のデータにした **[マークルツリー](https://ja.wikipedia.org/wiki/ハッシュ木)**
（markle tree）を作り、そこからマークルルート（markle root）を検証可能な取引情報の要約として生成する。
そうすることで検証に必要な値を減らすような工夫をしている。

具体例で大まかな手続きを見てみよう。
例えば、A さんが B さんに 1BTC を送金するというトランザクションを生成する。
あらかじめ登録している秘密鍵を使って署名すると、
ネットワークに接続している他のノードがその内容を確認することになる。

ここで問題が見つかった場合には、そのトランザクションは廃棄され、その先の処理は行われずに終わる。

<br />

### マイニング：データの検証と記録

トランザクションに問題がなければ、取引の参加者によって、取引データが検証される。

そしてデータの内容や記録の手順に問題がなければ、ひとかたまりのブロックとして
ブロックチェーン上に連結され、記録される。
これが **マイニング**（採掘）と呼ばれる作業で、検証する人を **マイナー**（採掘者）と呼ぶ。

`マイニングとは暗号を解読し新しいブロックをつなぐ作業`<br />
![マイニングとは暗号を解読し新しいブロックをつなぐ作業](./assets/028-block-chain/mining.png)

<br />

ビットコインの場合、マイナーは検証する作業の報酬として、決まった額のビットコインを受け取る。
そして、マイニングが完了した段階で初めて、A さんから B さんへの「1BTC の送金」が実行される。

`ＡさんからＢさんに送金する取引が発生`<br />
![ＡさんからＢさんに送金する取引が発生](./assets/028-block-chain/transfer-deal.png)

<br />

### ナンス（nonce）という値

ここで重要になってくるのは、チェーンに結びついたブロックが持っている **ナンス**（nonce）という値である。

ナンス（nonce）とは `number used once` の略で、「一度だけ使われる数」という意味を持っている。
おもに暗号通信などで用いられ、使い捨ての32ビットの値のことを指す。

この使い捨ての値、Nonce は、次のブロックと前のブロックをチェーンで繋ぐときに行う
アルゴリズムの計算の「解」として使われる。

この Nonce を算出することで、初めてチェーンにブロックが繋がるというルールがある。
個人が提供している各サーバーでこの計算を行い解を求めることになる。
この解である Nonce を見つけた人がチェーンにブロックを結び付けることができ、
それによる報酬をもらうことになる。
仮想通貨の場合は、マイナーにいくらかの仮想通貨が入ってくるというわけである。

<br />

### コンセンサスアルゴリズム

ナンス（nonce）を導き出すアルゴリズムを、コンセンサスアルゴリズムという。
Nonce を求める計算式は次のような式になる。

`Nonce を求める計算式`
> Challenge + Prev Hash + 取引(Transaction)

Challenge という新しい言葉が出てきたが、結論からいうと、この Challenge の値が Nonce になる。
前のブロックに格納されているハッシュ(Prev Hash)と取引(Transaction)を足し合わせたものに、
0 から順に値を足してハッシュを生成していく。この行為、1回1回をチャレンジと捉えている。

`0 から1つずつ足した値で Nonce を変えてハッシュを割り出していく` 
> 0 + Prev Hash + 取引(Transaction)
> 
> 1 + Prev Hash + 取引(Transaction)
> 
> 2 + Prev Hash + 取引(Transaction)
> 
> …

ハッシュを生成すると、たとえば `f19je43i90wam85023492` のようにハッシュ値が取得できる。
このハッシュ値の先頭の数桁が全て `0` となる Challenge の値が、Nonce の解となる。
ハッシュの先頭 3 桁が 0 になるまでチャレンジを繰り返すと取り決めした場合、
`000fewa8cewaklfwa3wa` のようになったら計算終了である。

このとき、Challenge の値が `124` だったら、Nonce に `124` を入れて
ブロックをチェーンに結びつけることができる。
`0` になる先頭の桁数を増やすことでより難解となり、それに伴い計算時間も掛かるようになる。

ビットコインではこの演算作業の難易度は約2週間に一度変更され、
Nonce が10分毎に見つかるよう調整されている。
ネットワーク全体の演算作業量が増えると難易度は上昇し、
演算作業量が減ると難易度が低下する仕組みになっている。

この **Nonce 値を見つけるには、原則、総当たりしかない。**
いろいろな Nonce 値を入れてみて、最終的なハッシュ値を計算して、
それが「上位3桁が `000`」という条件に合うかどうかを確かめてみるしかない。
そのため膨大な計算量が必要となる。

この Nonce を求める行為には、何度も膨大な量の計算をする必要があるため、
大量のマシンパワー、つまり電力が使われる。
条件を満たすハッシュ値を見つけることができれば、マイニングは成功となる。
正解となる Nonce は、他のマイナーやビットコインネットワークの利用者たちによって検算され、
規定のハッシュ値が生成されることが確認される。

発見された Nonce が正しいものと認められると、
ブロックチェーンに新たなブロックが繋げられ、Nonce もブロックの中に埋め込まれる。

サーバーが多くの電力を消費してしまう、このような大変な計算を誰がやってくれるのか。
ビットコインでは、世界中の人にお願いするという形を取っている。
もちろん、報酬なしにこんな計算を引き受ける人はいない。
そこで解となる Nonce を見つけた人には、仮想通貨のブロックチェーンであれば、
その仮想通貨が支払われるようにしてあり、この報酬を目当てに、多くの業者がこの計算に参加する。
このような業者は、まるで岩の中から鉱脈を掘り当てるようなものなので、マイニング（採掘）業者と呼ばれているわけである。

ビットコインのマイニングでは、いち早く正解の Nonce を発見したただ一人に
成功報酬として新規発行されるビットコインが贈られる仕組みになっている。

<br />

### ビットコインの最大発行量と半減期

マイニングによって生まれた報酬は、新たな通貨として誕生し市場に流通する。

ビットコインには、最大 2,100 万枚という発行量上限が存在している。
そのような環境の中で報酬欲しさにマイナーの数が増え続けると、
あっという間に発行量上限に達するビットコインが市場に流通してしまうことは容易に想像がつく。

そこでビットコインマイニングには「半減期」と呼ばれる仕組みが導入されている。
半減期とは、4年ごとにマイニングの報酬額が半分になる仕組みである。

2012年にはビットコインマイニングの報酬は 25BTC だったが、
4年後の2016年には 12.5BTC、さらに2020年には 6.25BTC まで報酬が下がっている。
こうして報酬額を下げることでビットコインの発行量を調整しているわけである。

ビットコインの最大発行量を 2,100 万BTCとすると、2140年ごろに新規発行が終わるとされている。
発行が終了してからのマイニング報酬は、トランザクション手数料のみとなる。

`ビットコインの最新ブロック情報`<br />
![ビットコインの最新ブロック情報](./assets/028-block-chain/blockchain-com-blocks.png)

Blockchain.com  
https://www.blockchain.com/btc/blocks

<br />

ここまでブロックチェーンの仕組みやアルゴリズムを見てきた。
ここからは、ブロックチェーンの4つの特徴的な情報管理技術を見ていく。

<br />

## ブロックチェーンの4つの特徴

さまざまな最先端技術が駆使されているブロックチェーンは、
情報の改ざんやハッキングなどに対する耐久性が高い情報管理技術といわれている。

そうしたブロックチェーンの安全性や利便性の高さを裏付ける、代表的な特徴は以下の4つである。

<br />

### 1. P2P（ピアツーピア）ネットワーク

ビットコインなどのブロックチェーンでは、情報の管理に **P2P ネットワーク** を採用しているため、
安全性が高いといわれている。

P2P ネットワークとは、複数の **ノード**（node）がデータを分散して情報共有するシステムのことである。
ノードとは、「ビットコインなど、特定の暗号資産のネットワークに接続したコンピュータ端末」のことで、
**ピア**（peer）とも呼ばれている。

意味合いとしては、これまでにも話してきた「分散型台帳技術」と同じなので、
P2P は分散型台帳技術の英語での呼び方と思ってもかまわない。

`サーバークライアント方式と P2P ネットワークの違い`<br />
![サーバークライアント方式と P2P ネットワークの違い](./assets/028-block-chain/p2p-network.png)

<br />

従来のクライアントサーバシステムでは、サーバーが故障するなどしてダウンすると、
システム全体が停止してしまうという問題があった。

しかし、P2P ネットワークを利用している場合は、複数のコンピューターがデータを分散して管理しているため、
たとえサーバーの1つがハッカーによる攻撃によってダウンしたとしても、全体に問題は起こらなくなっている。

実質、**ダウンタイムはゼロ** となる。

ハッカーによってデータのファイルが失われた場合でも、
他のサーバにデータが保管されているため、再び復元することも可能である。
多くのユーザーのコンピューターにデータが分散して保存されることで、リスクも1カ所に集中せずに分散される。

このように、P2P ネットワークを採用しているブロックチェーンは、
**ユーザーが相互に監視しあう分散型のシステム** になっており、
これまでの中央集権型のシステムとは異なる特徴を持っている。

<br />

### 2. 暗号技術

ビットコインのブロックチェーンが安全と考えられる理由として、
暗号技術が導入されていることも挙げられる。

暗号技術は、**公開鍵と秘密鍵の2つを利用してデータをやり取りする** ことが特徴である。
公開鍵と秘密鍵はペアになっており、暗号化したデータはこの2つがないと複号できない仕組みになっている。

公開鍵は第三者にも公開されるが、**暗号の解除は秘密鍵がないと行うことができない。**
そのため、秘密鍵さえ盗まれなければ、仮想通貨の安全性は確保される。
しかし、逆にいえば秘密鍵は厳重に管理することが大切だということになる。

秘密鍵を万が一第三者へ渡してしまった場合、データを漏えいさせてしまったり、
仮想通貨が盗まれてしまう可能性がありうる。

ブロックチェーンでは、
**ECDSA**（Elliptic Curve Digital Signature Algorithm **楕円曲線電子署名アルゴリズム**）
という暗号方式で、署名生成と検証が行われる。
ECDSA は楕円曲線を用いた暗号化をしており、
ビットコインでは `secp256k1` と呼ばれる楕円曲線を使っている。

`secp256k1: `<br />
`R は P, Q を通る直線と曲線の交点において x 軸に対称な点となる`<br />
![secp256k1: R は P, Q を通る直線と曲線の交点において x 軸に対称な点となる](./assets/028-block-chain/secp256k1.png)


<br />

### 3. PoW（Proof of Work プルーフ・オブ・ワーク）

ビットコインのブロックチェーンが安全と考えられる理由として、
**PoW**（Proof of Work プルーフ・オブ・ワーク）と呼ばれる
コンセンサスアルゴリズムが導入されていることも挙げられる。

PoW とは、簡単にいうと、取引の承認システムを指す。
具体的には多大な計算量を要する問題（＝特定の条件を満たすハッシュを探す）
を最初に解いたものにブロックをチェーンにつなげる権利を与えるというのが、PoW である。

先ほども話したようにビットコインの場合、ブロックチェーンへブロックを追加するためには、
非常に難解な計算問題を解く必要がある。

この計算作業（取引の承認作業）のことをマイニングと呼び、マイニングが最初に成功した人には、
報酬としてビットコインが与えられる仕組みになっている。
いち早くマイニングに成功するためには、
膨大な計算作業を高速に行うことができる高性能なコンピューターの導入が必要となる。

そのため、今では個人がビットコインのマイニングで成功することは難しい状況となっている。
また、1つのブロックを改ざんしようとした場合、
その後のブロックも改ざんする必要があるため、不正するには多くの手間と時間を要することとなる。

これにより、ビットコインのブロックチェーンは非常に改ざん困難な仕組みとなっている。

P2P（ピアツーピア）ネットワークにおいて何を発言権として認めるか、
という問題に対しての一つの回答が PoW である。
古典的な P2P では IP アドレス一つごと、プロセス一つごとなどに発言権があったが、
ビットコインではこれを CPU の計算量に応じて発言権を与えることにした。

またビットコインは、PoW を導入したことで、管理者が存在しないネットワーク上で
ダブルスペンディング（2重支払い）を防ぐことに成功している。

<br />

### 4. スマートコントラクト

スマートコントラクトとは、人の手を介さずに契約内容を自動で実行してくれる仕組みのことである。
ブロックチェーン技術が利用されることで、「契約内容が改ざんされない」
「中央管理者を介在させず、契約内容が自動で実行される」という2つの条件を満たすことができる。

このように、第三者を介さずに契約プロセスを自動化できるので、
**取引期間の短縮化や人件費の削減などを実現できる** のが、
スマートコントラクトの最大のメリットである。

ただし、スマートコントラクトは、すべての仮想通貨が実装している機能ではない。
よく知られたところでは、イーサリアム（ETH）がこの機能を実装している。
ブロックチェーンの可能性に注目した人々の手によって、
スマートコントラクトの機能を利用した様々なサービスがすでに生み出されている。

<br />

## ブロックチェーンの種類

ブロックチェーンには、おもに以下の3つの種類がある。

- パブリック型
- コンソーシアム型
- プライベート型

それぞれどのような特徴があるのか、順番に見ていく。

<br />

### パブリック型

パブリック型のブロックチェーンは、中央に管理者がおらず、
不特定多数のユーザーによって管理されているブロックチェーンである。

取引の仲介者がおらず、透明性のあるデータがインターネット上に公開されていることが特徴となる。
そのため、パブリック型のブロックチェーンは、オープン型のブロックチェーンといわれることもある。

ビットコインは、このパブリック型である。特定の組織に属していない。
プログラムのコードも GitHub 上で公開されている。
このように誰でもコードを利用し、プロジェクトに貢献できる仕組みは
オープンソースソフトウェア（OSS）と呼ばれ、ビジネスの OSS へのかかわり方に関する議論が活発になってきている。

bitcoin | GitHub  
https://github.com/bitcoin/bitcoin

<br />

### コンソーシアム型

コンソーシアム型のブロックチェーンは、複数の組織やグループなどによって管理されているブロックチェーンである。

コンソーシアム型のブロックチェーンとしては、
IBM 社の「Hyperledger Fabric」という OSS のフレームワークが有名である。

<br />

### プライベート型

プライベート型のブロックチェーンは、個人や単独の組織などで管理され、
ルール変更が容易であり、取引承認スピードも速いことが特徴である。

このような特徴から、プライベート型は一般企業や金融機関による利用が想定されており、
許可型（パーミッション型）のブロックチェーンともいわれている。

<br />

## ビットコイン（BTC）におけるブロックチェーンのメリット

ビットコインに使われているブロックチェーンには、おもに以下のようなメリットがある。

- 改ざんが非常に難しい
- 管理運用コストが安い
- システム全体としての安定性が高い

<br />

### 改ざんが非常に難しい

ブロックチェーンは、ひとまとまりのデータが鎖状に連なったものだが、
その連結部分には「ハッシュ値」という特殊な文字列が使われている。

そして、ブロックの中の情報を改ざんすると、このハッシュ値がまったく違うものに書き換わってしまい、
世界中のノードによって、すぐに改ざんしたことがわかってしまう。

さらに重要なことは、「それぞれのブロックは、自分の1つ前のブロックのハッシュ値を情報として持っている」
ということである。
改ざんによってあるブロックのハッシュ値が変わってしまうと、
次に連なるブロックにも手を入れて、書き換わったハッシュ値に合致するようにしなくてはならなくなる。

これは単に「文字列を打ち換える」という簡単な作業ではなく、高度な計算を繰り返し、ようやくできることである。
たとえそれができたとしても、さらにその次のブロックも……と、延々と作業を続けなくてはならなくなる。

それが途方もない作業だということは、想像できると思う。
ブロックチェーンのこうした特性によってセキュリティが保たれている。

ただし、記録を確認・検証してブロックをつないでいくマイナー（採掘者）たちが結託し、
全体の過半数を占めるほどの計算能力を持ったなら、ブロックチェーンに対するさまざまな攻撃が理論上は可能である。

これは **「51％攻撃」** と呼ばれるものだが、現実的にそれを実行することは、極めて難しいとされている。

<br />

### 管理運用コストが安い

すでに説明したように、ブロックチェーンは複数のノードによって、データが保存、管理されている。

これを一元管理するとしたら、莫大なコストが掛かる。
サーバーだけでも相当な容量が必要となり、その後の保守や管理費も含めると、膨大なコストになる。

しかし、世界中のノードを分散管理するのであれば、そうした費用が掛からない。
ビットコインを日常的に使っているユーザー、仮想通貨取引で利益を狙う投資家、
ブロックを作りチェーンを伸ばしていくマイナーなど、ビットコインに関わるあらゆる人たちが、
少しずつマシンパワーを提供することで、情報が保存、管理される。

これは、分散管理ならではの大きなメリットとなる。
そのため、ビットコインは、送金手数料を低く抑えることができるのである。

特に海外送金の場合に有利に働き、ビットコインは金融機関よりも遥かに安い手数料での取引が可能である。

<br />

### システム全体としての安定性が高い

ブロックチェーンは分散管理であることで、システム全体の安定性が高いといえる。

集中管理型の場合、何らかのトラブルでメインシステムが止まってしまったら、
取引全体が停止してしまう。
通常は、安全策としてサブシステムを用意しておくものだが、コストを考えればそれにも限界がある。

ところが分散管理型ならば、どこかに不具合が起こっても、全体が止まるということがない。
あるマイナーがマシントラブルを起こし、ブロックの生成がまったくできなくなったとしても、
他のマイナーが作業すれば、次々とブロックが作られることになる。

システム全体の安定性は、取引の信頼性を大きく左右する。
その意味では、世界中のノードによって支えられているブロックチェーンには、大きな安定感があるといえる。

実際に、ビットコインは2009年に取引が始められてから、これまで一度もシステムが停止したことはない。

<br />

## ビットコイン（BTC）におけるブロックチェーンのデメリット

数々のメリットを持つ半面、ブロックチェーンには次のようなデメリットもある。

- 時間あたりの取引数が少ない
- スケーラビリティ問題を抱えている
- 関連法規の未整備

ビットコインの取引を行う人は、デメリットについても把握しておく必要がある。

<br />

### 時間あたりの取引数が少ない

ビットコインの場合、1つのブロックを生成するために約10分掛かる。

つまり理論上では、A さんが B さんに 1BTC を送金すると、
その取引が承認されて実際に送金されるまで10分掛かる、ということになる。

また、ビットコインは、1つのブロックの記録容量が小さいこともあって、
現状、ビットコインがさばけるトランザクション（取引）の数は、1秒間に7件ほどといわれている。

こうした課題を解決するため、メインのブロックチェーンから分岐する「サイドチェーン」を作ったり、
ブロックチェーンの外側で取引を繰り返して最終的な結果だけをメインチェーンに記録する
「オフチェーン」の手法を使ったりして、取引速度を上げる対策が進められている。

<br />

### スケーラビリティ問題を抱えている

ビットコインが登場した当初、取引量はまだ微々たるものでしかなかった。

エンジニアたちのあいだで、半ば趣味のように、あるいは実証実験のように取引されていたのが実際のところであった。
しかし、ビットコインが世間に知られるようになり、その可能性に多くの人々が注目するようになると、
取引量は急速に増えていった。

取引量が増えることで、今後、送金に時間が掛かったり、送金要求が承認されなかったり、
取引手数料が高騰するといったスケーラビリティ問題が発生する可能性がある。

取引に遅延が起こり、早く処理するために手数料が高額になりやすく、それを嫌って利用者が離れていくリスクもある。

取引量が増えることへの対応は、ビットコインにとって大きな課題なので、
様々な対策が打ち出され、現在も試行錯誤が行われ続けている。

<br />

### 関連法規の未整備

ビットコインをはじめとする仮想通貨は、まだまだ新しい技術である。

ブロックチェーンを使った多くの実験的な改良がなされ、
その技術を活かした多種多様なサービスが世界中で生み出されている。
そのため、法律が追い付かずに、未整備の状況が発生しやすくなっているのが現状だ。

日本では、2017年4月1日に施行された「改正資金決済法」によって、
仮想通貨として暗号資産が定義され、その後も金融庁を中心に、
法整備や業界の健全性確保など、行政としての動きが続いてきた。

しかし、ブロックチェーンを利用した新たなサービス、新たなビジネスを起こしたとしても、
それが法的に問題ないかどうかという懸念は常に残る。
日本では合法だとしても、ほかの国では違法とされるケースもあり得る。

ブロックチェーンの関連技術とそこから生まれるサービスの法的整備は、
今や世界各国の課題にもなっている。

<br />

## ブロックチェーンの分岐とは？

ひとつながりのブロックチェーンが分岐することもある。
この分岐は、コーディングの用語では「ハードフォーク」と呼ばれている。
意図的に行われる分岐としては、まずバージョンアップを目的としたもの。
もうひとつは、新たな仮想通貨を作るためのものがある。

ビットコインは、過去にどちらの分岐も経験している。それによって、「Segwit」や「P2SH」といった機能が実装され、
**ビットコインキャッシュ** や **ビットコインゴールド** などの新たな仮想通貨が生まれた。
こうした分岐は、今後も必要に応じて行われる。

<br />

## ブロックチェーンの活用事例

ビットコインをはじめとした仮想通貨にとどまらず、ブロックチェーンは多方面に応用され、
多種多様なサービスを生み出している。

その多くは、改ざんへの強さやスマートコントラクトの機能が活用されており、
その広がりはとどまるところを知らない。それらブロックチェーンの活用例のいくつかを分野ごとに見ていくことにする。

<br />

### 金融（貯蓄、送金、証券取引、資金調達など）

仮想通貨による送金は、金融機関を介さないため手数料が非常に低く、しかも24時間機能するため、
すでに海外為替取引などに活用されている。
また、株券などの有価証券を電子データ化し、ブロックチェーンで管理すれば、
高いセキュリティを維持したまま運用コストを下げることができ、取引手数料の抑制にもつながる。
さらに、保有株数に応じて議決権を付与すれば、ブロックチェーン上で株主決議を行うことも可能となる。

#### デジタル人民元（中国）

中国は2020年春より、国内主要都市で「デジタル人民元（e-CNY）」の試験発行を開始している。
具体的には、抽選で当選した人々に200元程度のデジタル人民元を配布したり、
公務員への支払いの一部をデジタル人民元で行い、
これらの人々に店舗や通信販売などで使ってもらったりするといった実験を進めている。

デジタル人民元は、個人や企業に対し、民間銀行などを通じて間接的に発行される。
アプリやカードも民間銀行が提供しているが、2022年1月からは中国人民銀行も試験用のアプリをリリースしている。

デジタル人民元は、2022年2月の北京冬季五輪の会場でも試験的な流通が行われていた。

デジタル通貨を巡っては、世界中で数多くの取り組みが行われている。
その内容は国により違いはあるものの、
「新しいデジタル技術を活用し金融インフラを高度化しなければ」という問題意識は各国で共通している。

<br />

### 認証（本人確認、著作権管理、公証など）

ブロックチェーン上に記録された個人情報のうち、必要なものだけを参照するしくみがあれば、
あらゆる場面での個人認証が、身分証明書を提示することなく可能になる。

また、楽曲や文章、写真、映像作品などの著作権も、ブロックチェーン上に記録しておくことで、
その後の盗用などに対して正当な権利を主張できる。

現在、同様の機能を持つものとして、公証人が発行する「確定日付」があるが、
ブロックチェーンを使えば、公証人の手を借りずに公正証書を発行することができるともいわれている。

#### デジタルコンテンツの権利情報処理

ソニー株式会社、株式会社ソニー・ミュージックエンタテインメント、
株式会社ソニー・グローバルエデュケーションは、
ブロックチェーン技術を基盤としたデジタルコンテンツの権利情報処理システムを開発した。

ブロックチェーンを活用することで、改ざんが困難な形で事実情報を記録できるので、
高い安全性と透明性を兼ね備えた権利情報処理の手段として実用化されていくことが期待されている。

ソニーのデジタルコンテンツの著作権管理に利用される同システムは、
まずはデジタル教科書などの教育コンテンツから導入して、
音楽、映画、VRコンテンツ、電子書籍などに段階的に導入されていく予定である。

<br />

### 公共サービス（各種申告、納税、投票、医療など）

ブロックチェーンをベースとした行政サービスが作られれば、
選挙の投票のほか、各種申告や納税を、オンラインで行うことが可能となる。

また、血液型やアレルギー、これまでの病歴や受診記録などをブロックチェーンに保存しておき、
各医療機関で共有、参照できるようにすれば、万一の事故などで緊急搬送された際にも、
的確な治療をすみやかに受けることができようになる。

#### ブロックチェーンでデジタルIDを発行

世界では、いまだに11億人もの人が法的な ID を所持していないという問題がある。
ID2020 は、こうした人々に ID を付与することを目標に活動する国連主導のプロジェクトである。

世界的コンサルティング企業で ID2020 プロジェクトの発起メンバーである Accenture（アクセンチュア）が、
ブロックチェーンと生体認証システムを活用して開発したデジタル ID を、
2030年までに普及させることを目標にしている。

<br />

### エンターテイメント

ゲームの世界でも、ブロックチェーンが活用されている。
例えば、個性的なキャラクターをペットとして育てる「CryptoKitties」というゲームでは、
スマートコントラクトによる課金システムがとられており、
その機能を使って育てたキャラクターの個人間での売買を実現している。

また、各種オンラインゲームの中で使われている通貨を、
別のゲーム内でも使えるような両替システムを組むことも可能であり、
理論上はゲーム内で稼いだ通貨をビットコインなどの仮想通貨に、
さらにはドルや円といった法定通貨に換えることも可能となる。

もちろん、実現するには法的に高いハードルがあるが、
それができればゲームと現実の世界が、直接リンクすることにもなる。

#### ブロックチェーンゲーム

クリプトスペルズ（Crypto Spells）は、2019年6月25日に正式リリースされ、
初日で売上金額が 600ETH（当時のレートで約2,000万円）を突破した人気トレーディングカードゲームである。

ゲームの管理・運営にブロックチェーンを利用しているので、
カードの発行枚数、所有者、取引履歴などの情報が改ざんされにくいという特徴があり、
デジタル上のカードに資産としての価値を付与することが可能である。

このような特徴を生かして、クリプトスペルズではゲーム内で使用するカードを
ユーザー同士で自由に売買することができる。

<br />

### その他（データ管理、各種登記の自動化など）

ブロックチェーンの持つ耐改ざん性、安定性、信頼性、
さらにスマートコントラクトによる高効率な自動契約機能は、
各種のデータ管理や登記の自動化に適している。

車の登録や土地の登記、債権の売買なども、仲介者の手を借りず、
自動的かつ確実に契約が実行されることで、時間とコストの削減効果は非常に大きいといえる。

#### 不動産デジタルプラットフォームの構築

不動産テック企業の GA technologies（ジーエーテクノロジーズ）は、
ブロックチェーン技術を活用した不動産デジタルプラットフォームの構築を開始した。

プラットフォーム内にブロックチェーン技術を基盤としたスマートコントラクトを実装することで、
契約や決算、登記や資産の移動といった業務をデジタル化し、業務の効率化やコスト削減を目指していく予定である。

<br />

## ブロックチェーンの Q&A まとめ

最後にブロックチェーンに関するよくある質問を Q&A 形式でまとめる。

<br />

### Q：ブロックチェーンとは何ですか？

ブロックチェーンは、さまざまな取引履歴を信頼性のある形で保存することが可能なシステムである。
トランザクションと呼ばれる取引データをブロックで管理し、
それらのブロックを次から次へと鎖のようにつないでいく構造を持つことから、ブロックチェーンと呼ばれている。

<br />

### Q：ブロックチェーンの特徴を教えてください

ブロックチェーンでは、ネットワークに参加する全員が情報を分散して共有、管理することで、
誰が、いつ、どのような取引を行ったのかを明確にして、偽造やハッキングができないようにしている。
このような仕組みを、分散型台帳技術、または P2P（ピアツーピア）ネットワークという。

<br />

### Q：ブロックチェーンにはどのような種類がありますか？

ブロックチェーンにはおもに、パブリック型、コンソーシアム型、プライベート型の3種類がある。
ビットコインはパブリック型のブロックチェーンである。

<br />

### Q：ブロックチェーンにはどんなメリットがありますか？

ビットコインには、「改ざんが非常に難しい」、「管理運用コストが安い」、「システム全体としての安定性が高い」
などのメリットがある。

<br />

## ブロックチェーンについてのまとめ

ビットコインのバックボーンを支えるブロックチェーンについて、その基礎から将来性までを見てきた。

インターネットの転送速度、CPU の処理速度が、ブロックチェーンの設計思想にようやく追い付いてきたといえる現在。
急速にブロックチェーンの技術が広まり、数多くの応用方法が編み出されようとしている。 

ブロックチェーンには、メリットだけでなくデメリットもある。
しかし、ブロックチェーンはうまく活用すれば、仮想通貨取引のみならず、社会全体を支えるインフラにもなりえる。

ブロックチェーンを活用したサービスが日々生み出されることで、
従来の作業がより効率化され、同時に新たな価値も生み出されることになる。
ブロックチェーンはまさに、将来を変える可能性を秘めている、これからのテクノロジーといえる。
